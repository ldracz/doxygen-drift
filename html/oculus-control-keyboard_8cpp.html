<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Control of Drones using Oculus Rift: /home/lukasz/zros/src/oculus-drift/src/oculus-control-keyboard.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Control of Drones using Oculus Rift
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c5d2018bf8610f97707cf616b6ef3aea.html">zros</a></li><li class="navelem"><a class="el" href="dir_2a871c6ca2107c57df9ffebbc2988418.html">src</a></li><li class="navelem"><a class="el" href="dir_6ef5c41634887ee6029246229da64b81.html">oculus-drift</a></li><li class="navelem"><a class="el" href="dir_576f0cb168668a3080b351f522a0bb5f.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">oculus-control-keyboard.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;ros/console.h&gt;</code><br />
<code>#include &lt;tf/transform_broadcaster.h&gt;</code><br />
<code>#include &quot;geometry_msgs/PoseStamped.h&quot;</code><br />
<code>#include &quot;geometry_msgs/Quaternion.h&quot;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;termios.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;Eigen/Core&gt;</code><br />
<code>#include &lt;mav_msgs/conversions.h&gt;</code><br />
<code>#include &lt;mav_msgs/default_topics.h&gt;</code><br />
<code>#include &lt;ros/ros.h&gt;</code><br />
<code>#include &lt;std_srvs/Empty.h&gt;</code><br />
<code>#include &lt;trajectory_msgs/MultiDOFJointTrajectory.h&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for oculus-control-keyboard.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="oculus-control-keyboard_8cpp__incl.png" border="0" usemap="#_2home_2lukasz_2zros_2src_2oculus-drift_2src_2oculus-control-keyboard_8cpp" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a608d9948c063034b7605598daaeccc3e"><td class="memItemLeft" align="right" valign="top">Eigen::Vector3d&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a> (0.0, 0.0, 1.0)</td></tr>
<tr class="memdesc:a608d9948c063034b7605598daaeccc3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The position the drone is expected to go to.  <a href="#a608d9948c063034b7605598daaeccc3e">More...</a><br /></td></tr>
<tr class="separator:a608d9948c063034b7605598daaeccc3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oculus-control-keyboard_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Main Function that runs the keyboard loop.  <a href="#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a92b67ae724bc0d23b8e85e92e89403df"><td class="memItemLeft" align="right" valign="top">ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oculus-control-keyboard_8cpp.html#a92b67ae724bc0d23b8e85e92e89403df">pub_traj</a></td></tr>
<tr class="memdesc:a92b67ae724bc0d23b8e85e92e89403df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publisher for the desired trajectory of the drone.  <a href="#a92b67ae724bc0d23b8e85e92e89403df">More...</a><br /></td></tr>
<tr class="separator:a92b67ae724bc0d23b8e85e92e89403df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a090c0766fbb77862dd8cc0cca99d688b"><td class="memItemLeft" align="right" valign="top">trajectory_msgs::MultiDOFJointTrajectory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oculus-control-keyboard_8cpp.html#a090c0766fbb77862dd8cc0cca99d688b">traj_msg</a></td></tr>
<tr class="memdesc:a090c0766fbb77862dd8cc0cca99d688b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The message variable that is published.  <a href="#a090c0766fbb77862dd8cc0cca99d688b">More...</a><br /></td></tr>
<tr class="separator:a090c0766fbb77862dd8cc0cca99d688b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f7e4724cf57d59513b39c5ecc81adc8"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oculus-control-keyboard_8cpp.html#a7f7e4724cf57d59513b39c5ecc81adc8">speed</a> = 0.1</td></tr>
<tr class="memdesc:a7f7e4724cf57d59513b39c5ecc81adc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The speed at which the drone can move at.  <a href="#a7f7e4724cf57d59513b39c5ecc81adc8">More...</a><br /></td></tr>
<tr class="separator:a7f7e4724cf57d59513b39c5ecc81adc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cce9b626fdb3b1f78baad955bd5b609"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oculus-control-keyboard_8cpp.html#a2cce9b626fdb3b1f78baad955bd5b609">ninetyDegInRad</a> = 1.5708</td></tr>
<tr class="memdesc:a2cce9b626fdb3b1f78baad955bd5b609"><td class="mdescLeft">&#160;</td><td class="mdescRight">The value 90 degrees holds in radians (rounded)  <a href="#a2cce9b626fdb3b1f78baad955bd5b609">More...</a><br /></td></tr>
<tr class="separator:a2cce9b626fdb3b1f78baad955bd5b609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a69ef33d756512293e67791ab5f265"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a> = 0.0</td></tr>
<tr class="memdesc:a03a69ef33d756512293e67791ab5f265"><td class="mdescLeft">&#160;</td><td class="mdescRight">The yaw rotation expected of the drone to turn to (in radians)  <a href="#a03a69ef33d756512293e67791ab5f265">More...</a><br /></td></tr>
<tr class="separator:a03a69ef33d756512293e67791ab5f265"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a608d9948c063034b7605598daaeccc3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Eigen::Vector3d desired_position </td>
          <td>(</td>
          <td class="paramtype">0.&#160;</td>
          <td class="paramname"><em>0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0.&#160;</td>
          <td class="paramname"><em>0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1.&#160;</td>
          <td class="paramname"><em>0</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The position the drone is expected to go to. </p>

</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Main Function that runs the keyboard loop. </p>
<p>The terminal is cleared. When the terminal is active, it reads the key being pressed by the user. Based on what key is pressed the change needed in the desired trajectory will be calculated. This desired trajectory will then be published to the firefly drone. </p>
<p>get the console in raw mode</p>
<p>Setting a new line, then end of file </p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  ros::init(argc, argv, <span class="stringliteral">&quot;oculus_keycontrol&quot;</span>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  ros::NodeHandle nh;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="oculus-control-keyboard_8cpp.html#a090c0766fbb77862dd8cc0cca99d688b">traj_msg</a>.header.stamp = ros::Time::now();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="oculus-control-keyboard_8cpp.html#a92b67ae724bc0d23b8e85e92e89403df">pub_traj</a> = nh.advertise&lt;trajectory_msgs::MultiDOFJointTrajectory&gt;(<span class="stringliteral">&quot;/firefly/command/trajectory&quot;</span>, 1);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">int</span> ch, oldch;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordtype">char</span> cheese;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordtype">int</span> kfd = 0;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keyword">struct </span>termios cooked, raw;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordtype">float</span> <a class="code" href="oculus-control-keyboard_8cpp.html#a7f7e4724cf57d59513b39c5ecc81adc8">speed</a> = 0.05;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">int</span> active = 0;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">while</span>(1) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    tcgetattr(kfd, &amp;cooked);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    memcpy(&amp;raw, &amp;cooked, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> termios));</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    raw.c_lflag &amp;=~ (ICANON | ECHO);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    raw.c_cc[VEOL] = 1;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    raw.c_cc[VEOF] = 2;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    tcsetattr(kfd, TCSANOW, &amp;raw);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    puts(<span class="stringliteral">&quot;Reading from keyboard&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    puts(<span class="stringliteral">&quot;----Press X to activate/deactivate control-----------------&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    puts(<span class="stringliteral">&quot;Use W,A,S,D to move the drone. Use Q,E to adjust height of the drone. R,F to rotate.&quot;</span>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span>(read(kfd, &amp;cheese, 1) &lt; 0)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      perror(<span class="stringliteral">&quot;read():&quot;</span>);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      exit(-1);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">switch</span> (cheese) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span>(active == 0) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;          active = 1;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          active = 0;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        }</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;A&quot;</span>);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() - speed*cos(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>-<a class="code" href="oculus-control-keyboard_8cpp.html#a2cce9b626fdb3b1f78baad955bd5b609">ninetyDegInRad</a>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() - speed*sin(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>-<a class="code" href="oculus-control-keyboard_8cpp.html#a2cce9b626fdb3b1f78baad955bd5b609">ninetyDegInRad</a>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;S&quot;</span>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() - speed*cos(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() - speed*sin(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;D&#39;</span>:</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;D&quot;</span>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() + speed*cos(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>-<a class="code" href="oculus-control-keyboard_8cpp.html#a2cce9b626fdb3b1f78baad955bd5b609">ninetyDegInRad</a>);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() + speed*sin(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>-<a class="code" href="oculus-control-keyboard_8cpp.html#a2cce9b626fdb3b1f78baad955bd5b609">ninetyDegInRad</a>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>:</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;W&#39;</span>:</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;W&quot;</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.x() + speed*cos(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.y() + speed*sin(<a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>:</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;Q&#39;</span>:</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;Q&quot;</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.z() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.z() + <a class="code" href="oculus-control-keyboard_8cpp.html#a7f7e4724cf57d59513b39c5ecc81adc8">speed</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>:</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;E&quot;</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.z() = <a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>.z() - <a class="code" href="oculus-control-keyboard_8cpp.html#a7f7e4724cf57d59513b39c5ecc81adc8">speed</a>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;R&quot;</span>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a> = <a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a> + <a class="code" href="oculus-control-keyboard_8cpp.html#a7f7e4724cf57d59513b39c5ecc81adc8">speed</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        ROS_INFO(<span class="stringliteral">&quot;F&quot;</span>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a> = <a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a> - <a class="code" href="oculus-control-keyboard_8cpp.html#a7f7e4724cf57d59513b39c5ecc81adc8">speed</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">goto</span> PUB;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      PUB:</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">if</span> (active) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;          ROS_INFO(<span class="stringliteral">&quot;publishing&quot;</span>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;              mav_msgs::msgMultiDofJointTrajectoryFromPositionYaw(<a class="code" href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a>,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                  <a class="code" href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a>, &amp;<a class="code" href="oculus-control-keyboard_8cpp.html#a090c0766fbb77862dd8cc0cca99d688b">traj_msg</a>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;          <a class="code" href="oculus-control-keyboard_8cpp.html#a92b67ae724bc0d23b8e85e92e89403df">pub_traj</a>.publish(<a class="code" href="oculus-control-keyboard_8cpp.html#a090c0766fbb77862dd8cc0cca99d688b">traj_msg</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="ttc" id="oculus-control-keyboard_8cpp_html_a92b67ae724bc0d23b8e85e92e89403df"><div class="ttname"><a href="oculus-control-keyboard_8cpp.html#a92b67ae724bc0d23b8e85e92e89403df">pub_traj</a></div><div class="ttdeci">ros::Publisher pub_traj</div><div class="ttdoc">Publisher for the desired trajectory of the drone. </div><div class="ttdef"><b>Definition:</b> oculus-control-keyboard.cpp:22</div></div>
<div class="ttc" id="oculus-control-keyboard_8cpp_html_a7f7e4724cf57d59513b39c5ecc81adc8"><div class="ttname"><a href="oculus-control-keyboard_8cpp.html#a7f7e4724cf57d59513b39c5ecc81adc8">speed</a></div><div class="ttdeci">float speed</div><div class="ttdoc">The speed at which the drone can move at. </div><div class="ttdef"><b>Definition:</b> oculus-control-keyboard.cpp:28</div></div>
<div class="ttc" id="oculus-control-keyboard_8cpp_html_a03a69ef33d756512293e67791ab5f265"><div class="ttname"><a href="oculus-control-keyboard_8cpp.html#a03a69ef33d756512293e67791ab5f265">desired_yaw</a></div><div class="ttdeci">double desired_yaw</div><div class="ttdoc">The yaw rotation expected of the drone to turn to (in radians) </div><div class="ttdef"><b>Definition:</b> oculus-control-keyboard.cpp:38</div></div>
<div class="ttc" id="oculus-control-keyboard_8cpp_html_a090c0766fbb77862dd8cc0cca99d688b"><div class="ttname"><a href="oculus-control-keyboard_8cpp.html#a090c0766fbb77862dd8cc0cca99d688b">traj_msg</a></div><div class="ttdeci">trajectory_msgs::MultiDOFJointTrajectory traj_msg</div><div class="ttdoc">The message variable that is published. </div><div class="ttdef"><b>Definition:</b> oculus-control-keyboard.cpp:25</div></div>
<div class="ttc" id="oculus-control-keyboard_8cpp_html_a608d9948c063034b7605598daaeccc3e"><div class="ttname"><a href="oculus-control-keyboard_8cpp.html#a608d9948c063034b7605598daaeccc3e">desired_position</a></div><div class="ttdeci">Eigen::Vector3d desired_position(0.0, 0.0, 1.0)</div><div class="ttdoc">The position the drone is expected to go to. </div></div>
<div class="ttc" id="oculus-control-keyboard_8cpp_html_a2cce9b626fdb3b1f78baad955bd5b609"><div class="ttname"><a href="oculus-control-keyboard_8cpp.html#a2cce9b626fdb3b1f78baad955bd5b609">ninetyDegInRad</a></div><div class="ttdeci">float ninetyDegInRad</div><div class="ttdoc">The value 90 degrees holds in radians (rounded) </div><div class="ttdef"><b>Definition:</b> oculus-control-keyboard.cpp:34</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a03a69ef33d756512293e67791ab5f265"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double desired_yaw = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The yaw rotation expected of the drone to turn to (in radians) </p>

</div>
</div>
<a class="anchor" id="a2cce9b626fdb3b1f78baad955bd5b609"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ninetyDegInRad = 1.5708</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The value 90 degrees holds in radians (rounded) </p>

</div>
</div>
<a class="anchor" id="a92b67ae724bc0d23b8e85e92e89403df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ros::Publisher pub_traj</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publisher for the desired trajectory of the drone. </p>

</div>
</div>
<a class="anchor" id="a7f7e4724cf57d59513b39c5ecc81adc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float speed = 0.1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The speed at which the drone can move at. </p>

</div>
</div>
<a class="anchor" id="a090c0766fbb77862dd8cc0cca99d688b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">trajectory_msgs::MultiDOFJointTrajectory traj_msg</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The message variable that is published. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
